# JWT란? (진짜 초간단 설명)

> **JWT = JSON Web Token**  
> 이름은 거창한데, 한마디로 말하면 **“로그인 티켓”** 이다.

---

## 1. 놀이공원 비유로 끝내보자 🎢

1. 너가 놀이공원 입구에서 **표를 산다.**
2. 직원이 표에다:
   - 누구 건지 (이름 같은 거)
   - 언제까지 쓸 수 있는지
   - 기타 정보들  
   적어 놓고 **직원 도장 쾅** 찍어 줌.
3. 그 다음부터는:
   - 롤러코스터 탈 때
   - 회전목마 탈 때  
   그냥 **표만 보여주면** 된다.

이 **도장 찍힌 표 = JWT** 라고 생각하면 된다.

- **서버 = 놀이공원 직원**
- **JWT = 입장권(티켓)**

---

## 2. JWT 안에는 뭐가 들어있냐?

JWT는 그냥 긴 문자열인데, 안에는 이런 정보가 들어있다:

- 이 토큰이 누구 것인지 (예: uid=1, email=...)
- 언제까지 유효한지 (만료 시간)
- 이게 진짜 서버가 찍어준 건지 증명하는 **서명**

겉모습은 대충 이렇게 생겼다:

```text
aaaaaa.bbbbbb.cccccc
```

점(`.`)으로 **3조각**으로 나뉜다:

1. **헤더(header)**  
   → "나 JWT고, 이런 방식으로 서명했어" 라는 설명서
2. **내용(payload)**  
   → 유저 ID, 이메일 같은 실제 정보
3. **서명(signature)**  
   → 서버만 아는 비밀키로 찍은 도장

---

## 3. 왜 굳이 JWT를 쓰냐?

### 예전 방식: 세션 (서버가 다 기억함)

- 로그인하면 서버가 메모리에  
  “이 사람 로그인함~” 이라고 저장해 둔다.
- 서버가 여러 대로 늘어나면  
  “누가 어디에 로그인했는지” 맞추기 힘들어짐.

### JWT 방식: 서버는 “기억 안 함”

1. 로그인 성공하면
   - 서버가 유저 정보를 **JWT에 넣어서**
   - 그 JWT를 **클라이언트에게 준다.**
2. 그 다음 요청부터는
   - 클라이언트가 그 JWT를 들고 온다.
3. 서버는 그 JWT만 보고:
   - 도장이 맞는지
   - 아직 안 만료됐는지
   - 안에 있는 uid가 뭔지  
   확인해서 인증을 끝낸다.

즉, 서버 입장에서는:

> “나 굳이 너를 기억 안 해도 돼.  
> 너가 티켓(JWT)만 잘 들고 와.”

이게 **Stateless(상태를 안 들고 가는) 인증**이다.

---

## 4. JWT는 어디에 보관하냐?

JWT를 어디에 저장하느냐에 따라 스타일이 갈린다.

### 1) 로컬스토리지 / 세션스토리지

```js
localStorage.setItem("token", "eyJhbGciOi...");
```

- 장점: 다루기 쉽다.
- 단점: XSS 공격에 약하다.  
  (자바스크립트에서 훔쳐갈 수 있음)

### 2) 쿠키(HttpOnly 쿠키)

- 서버가 응답할 때 `Set-Cookie` 로 토큰을 심어준다.
- 브라우저가 **자동으로** 요청마다 그 쿠키를 같이 보낸다.
- `HttpOnly` 옵션을 켜면 JS에서 직접 못 읽음  
  → 훔쳐가기 조금 더 힘들다.

그래서 요즘엔:

> **JWT + HttpOnly 쿠키**

이 조합을 꽤 많이 쓴다.

---

## 5. 요청 하나 흐름 예시

1. 클라이언트:  
   “나 로그인 하고 싶어!” → `/auth/signin`
2. 서버:
   - 비밀번호 확인 OK
   - JWT 생성
   - 쿠키에 심어서 돌려줌 (`Set-Cookie: access_token=...`)
3. 클라이언트(브라우저):
   - 쿠키를 저장
4. 다음 요청 `/auth/me` 보낼 때:
   - 브라우저가 **자동으로 쿠키를 같이 첨부**
5. 서버:
   - 쿠키 안의 JWT 확인
   - 유효하면 “오케이, 너 uid=1이네” 하고 처리

---

## 6. 한 줄 요약 버전 ✂️

- **JWT = 서버가 만들어준 “로그인 증명서(티켓)”**
- 클라이언트가 그걸 잘 들고 다니다가
- 요청할 때마다 같이 내밀면,
- 서버는 “도장 OK? 만료 안됨?”만 확인해서  
  **로그인 여부를 판단**한다.

---

## 7. 진짜 초딩용 요약 🤏

- **로그인 하면 서버가 “나 인증받은 사람이다” 라는 종이를 하나 줌**
- 그 종이가 바로 JWT
- 종이를 잃어버리면? → 다시 로그인해야 함
- 종이 유효기간 지나면? → 다시 로그인해야 함
- 종이 위조하면? → 서버가 도장 보고 “가짜네?” 하고 거절함

이 정도 이해했으면  
JWT 개념은 이미 80% 이해한 거다 😄
